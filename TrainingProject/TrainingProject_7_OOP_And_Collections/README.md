### ООП и коллекции

Необходимо создать полномасштабное приложение для денежных переводов

Вам следует сосредоточиться на первом принципе SOLID.

Ваша задача - автоматизировать бизнес-процесс, связанный с переводами определенных сумм между участниками нашей системы.

Каждый пользователь системы может перевести определенную сумму другому пользователю. Нам нужно убедиться, что даже если мы потеряем историю входящих и исходящих переводов для конкретного пользователя, мы все равно сможем восстановить эту информацию.

Внутри системы все денежные транзакции хранятся в виде пар дебет/кредит. Например, Artur перевел Ivan 500 долларов. Система сохраняет транзакцию для обоих пользователей:
```java
Artur -> Ivan, -500, OUTCOME, transaction ID
Ivan -> Artur, +500, INCOME, transaction ID
```

Для восстановления соединения внутри таких пар следует использовать идентификаторы каждой транзакции.

Очевидно, что запись о передаче может быть потеряна в такой сложной системе — она может не быть записана для одного из пользователей (чтобы эмулировать и отлаживать такую ситуацию, разработчик должен иметь возможность удалить данные о передаче у одного из пользователей индивидуально). Поскольку такие ситуации реальны, требуется функциональность для отображения всех "неподтвержденных переводов" (транзакций, зарегистрированных только для одного пользователя) и устранения таких проблем.

Необходимо разработать базовые модели предметной области, а именно классы User и Transaction.
Вполне вероятно, что разные пользователи будут иметь одно и то же имя в системе. Эту проблему следует решить, добавив специальное поле для уникального идентификатора пользователя.

Таким образом, для пользовательского класса характерен следующий набор состояний (полей):

-	Identifier
-	Name
-	Balance

Класс Transaction описывает денежный перевод между двумя пользователями. Здесь также должен быть определен уникальный идентификатор. Поскольку количество таких транзакций может быть очень большим, давайте определим идентификатор как строку UUID. Таким образом, следующий набор состояний (полей) типичен для класса Transaction:
-	Identifier
-	Recipient (User type)
-	Sender (User type)
-	Transfer category (debits, credits)
-	Transfer amount

Начальный баланс пользователя не может быть отрицательным, а также баланс для исходящих (только отрицательные суммы) и входящих (только положительные суммы) транзакций (использование методов get/set).

Создайте класс UserIdsGenerator. Поведение объекта этого класса определяет функциональность для генерации идентификаторов пользователей.

Класс UserIdsGenerator содержит последний сгенерированный идентификатор в качестве своего состояния. Поведение UserIdsGenerator определяется методом int generateId(), который возвращает вновь сгенерированный идентификатор при каждом его вызове.

**Примечания**:

- Убедитесь, что существует только один объект UserIdsGenerator (смотрите шаблон Singleton). Это необходимо, поскольку существование нескольких объектов этого класса не может гарантировать уникальность всех идентификаторов пользователей.

- Идентификатор пользователя должен быть доступен только для чтения, поскольку он инициализируется только один раз (при создании объекта) и не может быть изменен позже во время выполнения программы.

- Временная логика для инициализации идентификатора должна быть добавлена в конструктор класса пользователя:

```java
  public User(...) {
  this.id = UserIdsGenerator.getInstance().generateId();
  }
```

Необходимо реализовать функциональность для хранения данных пользователей во время работы программы.

Определите интерфейс UsersList, который описывает следующее поведение:

- Добавить пользователя
- Получить пользователя по идентификатору
- Получить пользователя по индексу
- Получить количество пользователей

Реализуйте класс UsersArrayList, который реализует интерфейс UsersList.

Этот класс должен использовать массив для хранения пользовательских данных. Размер массива по умолчанию равен 10. Если массив заполнен, его размер увеличивается наполовину. Метод добавления пользователем помещает объект пользовательского типа в первую пустую (вакантную) ячейку массива.

В случае попытки получить пользователя с несуществующим идентификатором должно быть выдано непроверенное исключение UserNotFoundException.

**Примечание**:<br>
Вложенный Java-класс `ArrayList<T>` имеет ту же структуру. Самостоятельно смоделировав поведение этого класса, вы узнаете, как использовать механизмы этого стандартного библиотечного класса.

Создайте интерфейс TransactionsList, описывающий следующее поведение:
- Добавить транзакцию
- Удалить транзакцию по идентификатору (в данном случае используется строковый идентификатор UUID)
- Преобразовать в массив (например. Transaction[] toArray())

Список транзакций должен быть реализован в виде связанного списка (LinkedList) в классе TransactionsLinkedList. Следовательно, каждая транзакция должна содержать поле со ссылкой на следующий объект транзакции.
Если предпринята попытка удалить транзакцию с несуществующим идентификатором, должно быть выдано исключение среды выполнения TransactionNotFoundException.
Пример использования таких классов должен содержаться в основном файле (создание, инициализация, вывод содержимого объекта на консоль).

**Примечание**:<br>
- Нам нужно добавить поле транзакций типа TransactionsList в класс User, чтобы каждый пользователь мог хранить список своих транзакций.
- Транзакция должна быть добавлена с помощью одной операции (O(1))
- Вложенный Java-класс `LinkedList<T>` имеет ту же структуру, двунаправленный связанный список.

Необходимо реализовать паттерн Фасад для инкапсулирования бизнес логики. Создайте класс TransactionsService. В этом случае класс TransactionsService должен содержать поле типа UserList для взаимодействия с пользователем и предоставлять следующие функциональные возможности:
- Добавление пользователя
- Получение баланса пользователя
- Выполнение транзакции перевода (указываются идентификаторы пользователей и сумма перевода). В этом случае создаются две транзакции типов ДЕБЕТ/КРЕДИТ и добавляются к получателю и отправителю. Идентификаторы обеих транзакций должны быть одинаковыми
- Получение переводов конкретного пользователя (возвращается МАССИВ переводов). Удаление транзакции по идентификатору для конкретного пользователя (указываются идентификатор транзакции и идентификатор пользователя)
- Проверка действительности транзакций (возвращается МАССИВ непарных транзакций).

В случае попытки осуществить перевод суммы, превышающей остаточный баланс пользователя, должно быть выдано исключение среды выполнения IllegalTransactionException.

В результате вы должны создать функционирующее приложение с консольным меню. Функциональность меню должна быть реализована в соответствующем классе с полем ссылки на службу транзакций.

Каждый пункт меню должен сопровождаться номером команды, введенной пользователем для вызова действия.

Приложение должно поддерживать два режима запуска — production (стандартный режим) и dev (где информация о передаче для конкретного пользователя может быть удалена по идентификатору пользователя, и может быть запущена функция, проверяющая действительность всех переводов).

Если генерируется исключение, должно появиться сообщение, содержащее информацию об ошибке, и пользователю должна быть предоставлена возможность ввести действительные данные.

Сценарий работы приложения следующий (программа должна внимательно следовать этому примеру вывода):


```
$ java Main --profile=dev

1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
1
Введите имя пользователя и баланс
Artur 1000
Пользователь с ID = 1 успешно добавлен
---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
1
Введите имя пользователя и баланс
Ivan
500
Пользователь с ID = 2 успешно добавлен
---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
3
Введите ID отправителя, ID получателя и сумму перевода
1 2 700
Перевод завершен
---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
3
Введите ID отправителя, ID получателя и сумму перевода
1 2 60
Перевод завершен
---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
3
Введите ID отправителя, ID получателя и сумму перевода
1 2 210
Перевод завершен
---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
2
Введите ID пользователя
2
Ivan - 1470
---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
4
Введите ID пользователя
1
Artur   Ivan    -700    CREDITS         60546b09-8ad7-474f-ba5a-d1af83eb7984 
Artur   Ivan    -60     CREDITS         e2ee1b00-156d-4101-a083-bb00bbf0c715 
Artur   Ivan    -210    CREDITS         793197b2-c3cb-4dda-8ed4-ab2b052810f6 
---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
5
Введите ID пользователя и UUID транзакции
1 e2ee1b00-156d-4101-a083-bb00bbf0c715
Транзакция пользователя Artur(id=1) на сумму -60 удалена
---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
6
Результат проверки:
Ivan имеет неподтвержденный перевод id = e2ee1b00-156d-4101-a083-bb00bbf0c715 от Artur на сумму 60

---------------------------------------------------------
1. Добавить пользователя
2. Посмотреть баланс пользователя
3. Добавить транзакцию
4. Посмотреть все транзакции пользователя
5. DEV – удалить транзацию у пользователя по ID
6. DEV – посмотреть список не валидных транзакций
7. Завершить программу
7
```